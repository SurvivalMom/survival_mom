<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å—é¨“æˆ¦ç•¥ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆ â€” survival_mamå¼</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;500;600;700;800&family=Noto+Sans+JP:wght@300;400;500;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

  <style>
    /* â”€â”€â”€ Design tokens â”€â”€â”€ */
    :root {
      --ink:       #1c1814;
      --ink-soft:  #4a3f35;
      --ink-mute:  #8a7a6e;
      --cream:     #fdf8f2;
      --warm:      #f5ede0;
      --gold:      #c4973a;
      --gold-lt:   #e8c97a;
      --gold-dk:   #8a6520;
      --rose:      #c97a85;
      --rose-lt:   #f0d0d5;
      --sage:      #7a9e85;
      --sage-lt:   #d0e5d5;
      --card:      #ffffff;
      --border:    #e8ddd0;
      --shadow:    rgba(60,40,20,0.10);
      --shadow-md: rgba(60,40,20,0.18);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html { scroll-behavior: smooth; }

    body {
      background: var(--cream);
      color: var(--ink);
      font-family: 'Noto Sans JP', sans-serif;
      font-weight: 400;
      line-height: 1.8;
      min-height: 100vh;
    }

    /* â”€â”€â”€ èƒŒæ™¯ãƒ†ã‚¯ã‚¹ãƒãƒ£ â”€â”€â”€ */
    body::before {
      content: '';
      position: fixed; inset: 0; z-index: 0; pointer-events: none;
      background-image:
        radial-gradient(ellipse 80% 60% at 15% 20%, rgba(196,151,58,0.07) 0%, transparent 60%),
        radial-gradient(ellipse 60% 80% at 85% 75%, rgba(201,122,133,0.06) 0%, transparent 60%),
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='400' height='400' filter='url(%23n)' opacity='0.025'/%3E%3C/svg%3E");
    }

    /* â”€â”€â”€ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”»é¢ â”€â”€â”€ */
    #pw-overlay {
      position: fixed; inset: 0; z-index: 9999;
      background: var(--ink);
      display: flex; align-items: center; justify-content: center;
      padding: 24px;
      transition: opacity 0.6s ease;
    }
    #pw-overlay.hidden { opacity: 0; pointer-events: none; }

    .pw-box {
      background: var(--cream);
      border-radius: 4px;
      padding: 56px 48px;
      max-width: 400px; width: 100%;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .pw-box::before {
      content: '';
      position: absolute; top: 0; left: 0; right: 0; height: 4px;
      background: linear-gradient(90deg, var(--gold), var(--rose), var(--gold));
    }
    .pw-logo {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.1rem; letter-spacing: 0.15em;
      color: var(--gold); margin-bottom: 8px;
    }
    .pw-title {
      font-family: 'Shippori Mincho', serif;
      font-size: 1.4rem; font-weight: 700;
      color: var(--ink); margin-bottom: 4px;
    }
    .pw-sub {
      font-size: 0.78rem; color: var(--ink-mute);
      margin-bottom: 40px; letter-spacing: 0.05em;
    }
    .pw-label {
      font-size: 0.72rem; letter-spacing: 0.18em;
      color: var(--ink-mute); text-transform: uppercase;
      display: block; margin-bottom: 10px; text-align: left;
    }
    .pw-input {
      width: 100%; padding: 14px 18px;
      border: 1.5px solid var(--border);
      border-radius: 2px;
      font-family: 'Noto Sans JP', sans-serif;
      font-size: 1rem; letter-spacing: 0.2em;
      color: var(--ink);
      background: var(--cream);
      outline: none;
      transition: border-color 0.2s;
      margin-bottom: 20px;
    }
    .pw-input:focus { border-color: var(--gold); }
    .pw-input.error { border-color: var(--rose); animation: shake 0.4s; }
    .pw-btn {
      width: 100%; padding: 14px;
      background: var(--ink);
      color: var(--cream);
      border: none; cursor: pointer;
      font-family: 'Noto Sans JP', sans-serif;
      font-size: 0.85rem; font-weight: 500;
      letter-spacing: 0.2em;
      transition: background 0.2s, transform 0.15s;
      border-radius: 2px;
    }
    .pw-btn:hover { background: var(--gold-dk); }
    .pw-btn:active { transform: scale(0.98); }
    .pw-error-msg {
      margin-top: 14px; font-size: 0.8rem;
      color: var(--rose); height: 20px;
      transition: opacity 0.3s;
    }

    /* â”€â”€â”€ ãƒ¡ã‚¤ãƒ³ãƒ©ãƒƒãƒ‘ãƒ¼ â”€â”€â”€ */
    #app {
      position: relative; z-index: 1;
      max-width: 780px; margin: 0 auto;
      padding: 60px 24px 100px;
      opacity: 0; transform: translateY(16px);
      transition: opacity 0.6s ease 0.1s, transform 0.6s ease 0.1s;
    }
    #app.visible { opacity: 1; transform: translateY(0); }

    /* â”€â”€â”€ ãƒ˜ãƒƒãƒ€ãƒ¼ â”€â”€â”€ */
    .header {
      text-align: center; margin-bottom: 64px;
      padding-bottom: 40px;
      border-bottom: 1px solid var(--border);
      position: relative;
    }
    .header-eyebrow {
      font-family: 'Cormorant Garamond', serif;
      font-size: 0.95rem; letter-spacing: 0.3em;
      color: var(--gold); margin-bottom: 12px;
      display: block;
    }
    .header-title {
      font-family: 'Shippori Mincho', serif;
      font-size: clamp(1.6rem, 4vw, 2.4rem);
      font-weight: 800; line-height: 1.4;
      color: var(--ink); margin-bottom: 12px;
    }
    .header-title span { color: var(--gold); }
    .header-sub {
      font-size: 0.85rem; color: var(--ink-mute);
      letter-spacing: 0.05em;
    }
    .header-ornament {
      display: flex; align-items: center; justify-content: center;
      gap: 16px; margin-top: 32px;
    }
    .header-ornament::before,
    .header-ornament::after {
      content: ''; flex: 1; max-width: 120px;
      height: 1px; background: linear-gradient(90deg, transparent, var(--gold));
    }
    .header-ornament::after { background: linear-gradient(90deg, var(--gold), transparent); }
    .header-ornament-center {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.2rem; color: var(--gold);
    }

    /* â”€â”€â”€ ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…±é€š â”€â”€â”€ */
    .section {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 40px;
      margin-bottom: 32px;
      box-shadow: 0 2px 20px var(--shadow);
      position: relative; overflow: hidden;
      opacity: 0; transform: translateY(20px);
      transition: opacity 0.5s ease, transform 0.5s ease, box-shadow 0.3s;
    }
    .section.visible { opacity: 1; transform: translateY(0); }
    .section:hover { box-shadow: 0 6px 40px var(--shadow-md); }
    .section::before {
      content: attr(data-num);
      position: absolute; top: -12px; right: 32px;
      font-family: 'Cormorant Garamond', serif;
      font-size: 5rem; font-weight: 600; line-height: 1;
      color: rgba(196,151,58,0.08);
      pointer-events: none; user-select: none;
    }

    /* â”€â”€â”€ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ â”€â”€â”€ */
    .sec-eyebrow {
      font-family: 'Cormorant Garamond', serif;
      font-size: 0.8rem; letter-spacing: 0.25em;
      color: var(--gold); text-transform: uppercase;
      display: block; margin-bottom: 6px;
    }
    .sec-title {
      font-family: 'Shippori Mincho', serif;
      font-size: 1.25rem; font-weight: 700;
      color: var(--ink); margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }

    /* â”€â”€â”€ ãƒ©ãƒ™ãƒ« â”€â”€â”€ */
    .field-label {
      font-size: 0.75rem; letter-spacing: 0.15em;
      color: var(--ink-mute); display: block;
      margin-bottom: 8px; font-weight: 500;
    }
    .field-wrap { margin-bottom: 24px; }

    /* â”€â”€â”€ ã‚¤ãƒ³ãƒ—ãƒƒãƒˆå…±é€š â”€â”€â”€ */
    input[type="text"], textarea {
      width: 100%; padding: 12px 16px;
      border: 1.5px solid var(--border);
      border-radius: 2px;
      font-family: 'Noto Sans JP', sans-serif;
      font-size: 0.9rem; color: var(--ink);
      background: var(--cream);
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
      resize: vertical;
    }
    input[type="text"]:focus, textarea:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(196,151,58,0.1);
    }
    textarea[readonly] {
      background: var(--warm);
      color: var(--ink-soft);
      cursor: default;
      resize: none;
    }

    /* â”€â”€â”€ ãƒˆãƒ¼ãƒ³ãƒœã‚¿ãƒ³ â”€â”€â”€ */
    .tone-group {
      display: flex; gap: 10px; flex-wrap: wrap;
      margin-bottom: 24px;
    }
    .tone-btn {
      padding: 9px 22px;
      border: 1.5px solid var(--border);
      border-radius: 2px;
      font-family: 'Noto Sans JP', sans-serif;
      font-size: 0.8rem; font-weight: 500;
      letter-spacing: 0.1em;
      cursor: pointer; color: var(--ink-soft);
      background: var(--cream);
      transition: all 0.2s;
    }
    .tone-btn:hover { border-color: var(--gold); color: var(--gold-dk); }
    .tone-btn.active-polite  { background: #e8f4f0; border-color: var(--sage); color: var(--sage); font-weight: 700; }
    .tone-btn.active-nego    { background: #fef9e6; border-color: var(--gold); color: var(--gold-dk); font-weight: 700; }
    .tone-btn.active-strong  { background: #fce8ea; border-color: var(--rose); color: var(--rose); font-weight: 700; }

    /* â”€â”€â”€ ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ â”€â”€â”€ */
    .copy-btn {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 8px 18px; margin-top: 10px;
      border: 1.5px solid var(--border);
      border-radius: 2px; background: var(--cream);
      font-family: 'Noto Sans JP', sans-serif;
      font-size: 0.75rem; letter-spacing: 0.12em;
      color: var(--ink-mute); cursor: pointer;
      transition: all 0.2s;
    }
    .copy-btn:hover { border-color: var(--gold); color: var(--gold-dk); background: #fffbf0; }
    .copy-btn.copied { border-color: var(--sage); color: var(--sage); background: var(--sage-lt); }

    /* â”€â”€â”€ ãƒ«ãƒ¼ãƒ«å…¥åŠ›ãƒªã‚¹ãƒˆ â”€â”€â”€ */
    .rule-item {
      display: flex; align-items: center; gap: 12px;
      margin-bottom: 10px;
    }
    .rule-num {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.1rem; color: var(--gold);
      min-width: 24px; text-align: center;
      line-height: 1;
    }

    /* â”€â”€â”€ ãƒãƒƒã‚¸ â”€â”€â”€ */
    .badge {
      display: inline-block;
      padding: 4px 14px;
      border: 1px solid var(--sage);
      border-radius: 2px;
      font-size: 0.72rem; letter-spacing: 0.15em;
      color: var(--sage); background: var(--sage-lt);
      margin-top: 10px;
      opacity: 0; transform: scale(0.8);
      transition: opacity 0.3s, transform 0.3s;
    }
    .badge.show { opacity: 1; transform: scale(1); }

    /* â”€â”€â”€ mamå­ãƒãƒ–ãƒ« â”€â”€â”€ */
    #mamkoBubble {
      position: fixed; bottom: 28px; right: 28px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 16px 20px;
      max-width: 260px;
      font-size: 0.82rem; line-height: 1.6;
      color: var(--ink-soft);
      box-shadow: 0 8px 32px var(--shadow-md);
      z-index: 100;
      transition: all 0.4s cubic-bezier(0.4,0,0.2,1);
      opacity: 0; transform: translateY(10px) scale(0.95);
    }
    #mamkoBubble.show { opacity: 1; transform: translateY(0) scale(1); }
    #mamkoBubble::before {
      content: '';
      position: absolute; top: 0; left: 0; right: 0; height: 3px;
      background: linear-gradient(90deg, var(--rose), var(--gold));
      border-radius: 4px 4px 0 0;
    }
    .mamko-name {
      font-size: 0.7rem; font-weight: 700;
      color: var(--rose); letter-spacing: 0.12em;
      margin-bottom: 4px; display: block;
    }

    /* â”€â”€â”€ ã‚¢ãƒ‹ãƒ¡ â”€â”€â”€ */
    @keyframes shake {
      0%,100% { transform: translateX(0); }
      20%      { transform: translateX(-6px); }
      60%      { transform: translateX(6px); }
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* â”€â”€â”€ ãƒ•ãƒƒã‚¿ãƒ¼ â”€â”€â”€ */
    .footer {
      text-align: center; padding-top: 48px;
      border-top: 1px solid var(--border);
      font-family: 'Cormorant Garamond', serif;
      font-size: 0.85rem; color: var(--ink-mute);
      letter-spacing: 0.15em;
    }

    /* â”€â”€â”€ ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– â”€â”€â”€ */
    @media (max-width: 600px) {
      .section { padding: 28px 20px; }
      .pw-box  { padding: 40px 24px; }
    }
  </style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â• ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”»é¢ â•â•â•â•â•â•â•â•â•â• -->
<div id="pw-overlay">
  <div class="pw-box">
    <span class="pw-logo">âœ¦ survival_mamå¼ âœ¦</span>
    <h1 class="pw-title">å—é¨“æˆ¦ç•¥ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆ</h1>
    <p class="pw-sub">ã”åˆ©ç”¨ã«ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™</p>
    <label class="pw-label" for="pwInput">Password</label>
    <input class="pw-input" type="password" id="pwInput" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›" autocomplete="off" />
    <button class="pw-btn" id="pwBtn">ã²ã‚‰ã &nbsp;â†’</button>
    <p class="pw-error-msg" id="pwError"></p>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª â•â•â•â•â•â•â•â•â•â• -->
<div id="app">

  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header class="header">
    <span class="header-eyebrow">survival_mam å¼</span>
    <h1 class="header-title">è¦ªå­ã§ä½œã‚‹<br><span>å—é¨“æˆ¦ç•¥</span>ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆ</h1>
    <p class="header-sub">ä¸­å­¦å—é¨“ã‚’ã€æˆ¦ç•¥çš„ã«ãƒ»ç©ã‚„ã‹ã«ä¹—ã‚Šè¶Šãˆã‚‹ãŸã‚ã«</p>
    <div class="header-ornament">
      <span class="header-ornament-center">âœ¦</span>
    </div>
  </header>

  <!-- â‘  ãŠå­ã•ã‚“ã®åå‰ -->
  <section class="section" data-num="01" id="sec-name">
    <span class="sec-eyebrow">Basic Info</span>
    <h2 class="sec-title">ãŠå­ã•ã‚“ã®åå‰</h2>
    <div class="field-wrap">
      <label class="field-label" for="childName">ãŠåå‰ï¼ˆä¾‹ï¼šãŸã‚ã†ï¼‰</label>
      <input type="text" id="childName" placeholder="ãŠå­ã•ã‚“ã®ãŠåå‰" />
    </div>
  </section>

  <!-- â‘¡ å¡¾ã¸ã®è¦æœ›æ–‡ -->
  <section class="section" data-num="02" id="sec-letter">
    <span class="sec-eyebrow">Letter Generator</span>
    <h2 class="sec-title">å¡¾ã¸ã®å®¿é¡Œå‰Šæ¸› è¦æœ›æ–‡</h2>

    <div class="field-wrap">
      <label class="field-label" for="reason">å‰Šæ¸›ã‚’ãŠé¡˜ã„ã—ãŸã„ç†ç”±</label>
      <textarea id="reason" rows="3" placeholder="ä¾‹ï¼šæ¯æ™©23æ™‚ã¾ã§çµ‚ã‚ã‚‰ãšã€ç¡çœ ä¸è¶³ãŒç¶šã„ã¦ã„ã¾ã™"></textarea>
    </div>

    <div class="field-wrap">
      <label class="field-label">æ–‡ç« ã®ãƒˆãƒ¼ãƒ³</label>
      <div class="tone-group">
        <button class="tone-btn" id="btn-polite"  onclick="setTone('ä¸å¯§')">ä¸å¯§ã«ãŠé¡˜ã„</button>
        <button class="tone-btn" id="btn-nego"    onclick="setTone('äº¤æ¸‰')">äº¤æ¸‰ã‚¹ã‚¿ã‚¤ãƒ«</button>
        <button class="tone-btn" id="btn-strong"  onclick="setTone('å¼·ç¡¬')">å¼·ã‚ã«ä¼ãˆã‚‹</button>
      </div>
    </div>

    <div class="field-wrap">
      <label class="field-label">ç”Ÿæˆã•ã‚ŒãŸè¦æœ›æ–‡</label>
      <textarea id="output" rows="8" readonly placeholder="ä¸Šã®ãƒˆãƒ¼ãƒ³ã‚’é¸ã¶ã¨æ–‡ç« ãŒç”Ÿæˆã•ã‚Œã¾ã™"></textarea>
      <button class="copy-btn" id="copyLetter" onclick="copyText('output','copyLetter')">
        âœ¦ ã‚³ãƒ”ãƒ¼ã™ã‚‹
      </button>
    </div>
  </section>

  <!-- â‘¢ æ¨ã¦ç§‘ç›®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ -->
  <section class="section" data-num="03" id="sec-checklist">
    <span class="sec-eyebrow">Score Strategy</span>
    <h2 class="sec-title">é…ç‚¹æˆ¦ç•¥ Â· æ¨ã¦ç§‘ç›®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h2>

    <div class="field-wrap">
      <label class="field-label" for="strengths">å¾—æ„ãªç§‘ç›®ãƒ»åˆ†é‡</label>
      <input type="text" id="strengths" placeholder="ä¾‹ï¼šç®—æ•°ã€ç†ç§‘ã®è¨ˆç®—" />
    </div>
    <div class="field-wrap">
      <label class="field-label" for="weak">è‹¦æ‰‹ã¾ãŸã¯é…ç‚¹ã®ä½ã„ç§‘ç›®</label>
      <input type="text" id="weak" placeholder="ä¾‹ï¼šå›½èªã®è¨˜è¿°ã€ç¤¾ä¼šã®ç´°ã‹ã„æš—è¨˜" />
    </div>

    <div class="field-wrap">
      <label class="field-label">é…ç‚¹æˆ¦ç•¥ãƒ¡ãƒ¢</label>
      <textarea id="checklist" rows="5" readonly placeholder="å¾—æ„ãƒ»è‹¦æ‰‹ç§‘ç›®ã‚’å…¥åŠ›ã™ã‚‹ã¨æˆ¦ç•¥ãƒ¡ãƒ¢ãŒç”Ÿæˆã•ã‚Œã¾ã™"></textarea>
      <div id="badgeArea" class="badge">âœ¦ æˆ¦ç•¥ãƒ¡ãƒ¢ å®Œæˆ</div>
      <button class="copy-btn" id="copyCheck" onclick="copyText('checklist','copyCheck')" style="margin-top:10px">
        âœ¦ ã‚³ãƒ”ãƒ¼ã™ã‚‹
      </button>
    </div>
  </section>

  <!-- â‘£ æˆ‘ãŒå®¶ã®å—é¨“ãƒ«ãƒ¼ãƒ« -->
  <section class="section" data-num="04" id="sec-rules">
    <span class="sec-eyebrow">House Rules</span>
    <h2 class="sec-title">æˆ‘ãŒå®¶ã®å—é¨“ãƒ«ãƒ¼ãƒ«ï¼ˆ10é …ç›®ï¼‰</h2>
    <p style="font-size:0.82rem;color:var(--ink-mute);margin-bottom:24px;">
      å®¶æ—ã§æ±ºã‚ãŸãƒ«ãƒ¼ãƒ«ã‚’æ›¸ãç•™ã‚ã¦ãŠãã¾ã—ã‚‡ã†ã€‚å…¥åŠ›ã—ãŸå†…å®¹ã¯ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«åæ˜ ã•ã‚Œã¾ã™ã€‚
    </p>

    <div id="rules" style="margin-bottom:24px;"></div>

    <div class="field-wrap">
      <label class="field-label">ãƒ«ãƒ¼ãƒ«ä¸€è¦§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</label>
      <textarea id="rulesOutput" rows="10" readonly placeholder="ãƒ«ãƒ¼ãƒ«ã‚’å…¥åŠ›ã™ã‚‹ã¨ã“ã“ã«ã¾ã¨ã‚ã‚‰ã‚Œã¾ã™"></textarea>
      <button class="copy-btn" id="copyRules" onclick="copyText('rulesOutput','copyRules')">
        âœ¦ ã‚³ãƒ”ãƒ¼ã™ã‚‹
      </button>
    </div>
  </section>

  <footer class="footer">
    <p>âœ¦ survival_mamå¼ å—é¨“æˆ¦ç•¥ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆ âœ¦</p>
    <p style="font-size:0.75rem;margin-top:6px;color:var(--gold)">
      å…¥åŠ›å†…å®¹ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿ã«ä¿å­˜ã•ã‚Œã¾ã™
    </p>
  </footer>
</div>

<!-- mamå­ãƒãƒ–ãƒ« -->
<div id="mamkoBubble">
  <span class="mamko-name">ğŸ“š mamå­ã‚ˆã‚Š</span>
  <span id="mamkoText">ä»Šæ—¥ã‚‚ãŠç–²ã‚Œã•ã¾ã§ã™ã€‚<br>ä¸€ç·’ã«ä¹—ã‚Šè¶Šãˆã¾ã—ã‚‡ã†ï¼</span>
</div>

<script>
  /* â•â•â•â•â•â• ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ â•â•â•â•â•â• */
  const CORRECT_PW = 'syukudai';
  const overlay = document.getElementById('pw-overlay');
  const appEl   = document.getElementById('app');
  const pwInput = document.getElementById('pwInput');
  const pwBtn   = document.getElementById('pwBtn');
  const pwError = document.getElementById('pwError');

  function tryUnlock() {
    if (pwInput.value === CORRECT_PW) {
      overlay.classList.add('hidden');
      setTimeout(() => { overlay.style.display = 'none'; }, 700);
      appEl.classList.add('visible');
      initSections();
      showMamko('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼OKï¼ã‚ˆã†ã“ã âœ¦', 4000);
    } else {
      pwInput.classList.add('error');
      pwError.textContent = 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™ã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚';
      setTimeout(() => {
        pwInput.classList.remove('error');
        pwInput.value = '';
        pwInput.focus();
      }, 500);
    }
  }

  pwBtn.addEventListener('click', tryUnlock);
  pwInput.addEventListener('keydown', e => { if (e.key === 'Enter') tryUnlock(); });

  /* â•â•â•â•â•â• ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ â•â•â•â•â•â• */
  function initSections() {
    const sections = document.querySelectorAll('.section');
    const io = new IntersectionObserver((entries) => {
      entries.forEach((e, i) => {
        if (e.isIntersecting) {
          setTimeout(() => e.target.classList.add('visible'), 80);
          io.unobserve(e.target);
        }
      });
    }, { threshold: 0.08 });
    sections.forEach(s => io.observe(s));
  }

  /* â•â•â•â•â•â• ãƒ„ãƒ¼ãƒ«ãƒ­ã‚¸ãƒƒã‚¯ â•â•â•â•â•â• */
  let tone = 'ä¸å¯§';

  const templates = {
    'ä¸å¯§': () => `ã„ã¤ã‚‚ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ã€‚\n\n${val('childName')}ã®å®¶åº­å­¦ç¿’çŠ¶æ³ã‚’è¸ã¾ãˆã€ç¾åœ¨ã®å®¿é¡Œã®åˆ†é‡ã«ã¤ã„ã¦å†æ¤œè¨ã„ãŸã ã‘ãªã„ã‹ã”ç›¸è«‡ã•ã›ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚\n\nç‰¹ã«ã€Œ${val('reason')}ã€ã¨ã„ã†çŠ¶æ³ã«ãŠã„ã¦è² æ‹…ãŒå¤§ããã€ã“ã®ã¾ã¾ã§ã¯ä»Šå¾Œã®å­¦ç¿’ç¶™ç¶šã«æ”¯éšœã‚’ããŸã™å¯èƒ½æ€§ãŒã‚ã‚‹ã¨æ„Ÿã˜ã¦ãŠã‚Šã¾ã™ã€‚\n\nãŠå­ã•ã¾ã®å­¦ç¿’åŠ¹æœã‚’æœ€å¤§åŒ–ã™ã‚‹ãŸã‚ã€å®¿é¡Œã®é‡ã‚’èª¿æ•´ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ã€‚ä½•å’ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚`,

    'äº¤æ¸‰': () => `ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ã€‚\n\n${val('childName')}ã®å­¦ç¿’é€²æ—ã‚’è¸ã¾ãˆã€ã€Œ${val('reason')}ã€ã¨ã„ã†ç‚¹ã§ç¾åœ¨ã®å®¿é¡Œå†…å®¹ã«éå‰°ãªè² è·ãŒã‹ã‹ã£ã¦ãŠã‚Šã¾ã™ã€‚\n\nã“ã®ã¾ã¾ã§ã¯ã€æœ¬æ¥ã®ç›®çš„ã§ã‚ã‚‹ç†è§£ã¨å®šç€ãŒæãªã‚ã‚Œã‹ã­ã¾ã›ã‚“ã€‚ã¤ãã¾ã—ã¦ã¯ã€è©²å½“ç§‘ç›®ã®å®¿é¡Œé‡ã®è¦‹ç›´ã—ã‚’ãŠé¡˜ã„ã§ãã‚Œã°ã¨å­˜ã˜ã¾ã™ã€‚\n\nå…·ä½“çš„ãªã”ææ¡ˆã‚’ã„ãŸã ã‘ã¾ã™ã¨ã€å”åŠ›ã—ã¦å‚ã‚ŠãŸã„ã¨æ€ã£ã¦ãŠã‚Šã¾ã™ã€‚ã©ã†ãã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚`,

    'å¼·ç¡¬': () => `${val('childName')}ã®ç¾çŠ¶ã‚’è¸ã¾ãˆã€ã€Œ${val('reason')}ã€ã®ã‚ˆã†ãªéå‰°ãªèª²é¡Œã¯ã€æ•™è‚²çš„è¦³ç‚¹ã‹ã‚‰è¦‹ã¦ã‚‚é€†åŠ¹æœã¨åˆ¤æ–­ã—ã¦ãŠã‚Šã¾ã™ã€‚\n\nå­¦ç¿’åŠ¹æœã‚ˆã‚Šã‚‚ç–²å¼ŠãŒå…ˆè¡Œã—ã¦ã„ã‚‹ç¾çŠ¶ã‚’æ·±åˆ»ã«å—ã‘æ­¢ã‚ã¦ãŠã‚Šã€ä»Šå¾Œã‚‚ç¾çŠ¶ãŒç¶šãã‚ˆã†ã§ã‚ã‚Œã°ã€è»¢å¡¾ã‚’å«ã‚ãŸé¸æŠè‚¢ã‚‚æ¤œè¨ã›ã–ã‚‹ã‚’å¾—ã¾ã›ã‚“ã€‚\n\né€Ÿã‚„ã‹ã«ã”å¯¾å¿œã„ãŸã ã‘ã¾ã™ã‚ˆã†ã€ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚`
  };

  function val(id) {
    return document.getElementById(id).value.trim() || 'ã€‡ã€‡';
  }

  function setTone(t) {
    tone = t;
    // ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆ
    ['polite','nego','strong'].forEach(k => {
      document.getElementById(`btn-${k}`).className = 'tone-btn';
    });
    const map = { 'ä¸å¯§':'polite','äº¤æ¸‰':'nego','å¼·ç¡¬':'strong' };
    document.getElementById(`btn-${map[t]}`).className = `tone-btn active-${map[t]}`;

    const txt = templates[t]();
    document.getElementById('output').value = txt;
    localStorage.setItem('tone_output', txt);
    localStorage.setItem('tone_key', t);
    showMamko(`ã€Œ${t}ã€ã‚¹ã‚¿ã‚¤ãƒ«ã®è¦æœ›æ–‡ã‚’ç”Ÿæˆã—ã¾ã—ãŸ âœ¦`);
  }

  // å¾—æ„ãƒ»è‹¦æ‰‹å…¥åŠ›ã§ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆæ›´æ–°
  ['strengths','weak'].forEach(id => {
    document.getElementById(id).addEventListener('input', updateChecklist);
  });

  function updateChecklist() {
    const s = val('strengths'), w = val('weak');
    const txt =
`ã€é…ç‚¹æˆ¦ç•¥ãƒ¡ãƒ¢ã€‘

â–¶ å¼·åŒ–ãƒã‚¤ãƒ³ãƒˆï¼ˆå¾—æ„ã‚’ä¼¸ã°ã™ï¼‰
  ${s}
  â†’ æº€ç‚¹ãƒ»é«˜å¾—ç‚¹ã‚’ç‹™ã†ã€Œç¨¼ãå ´ã€ã¨ã—ã¦å¾¹åº•å¼·åŒ–

â–¶ å–æ¨é¸æŠï¼ˆé…åˆ†ã‚’è€ƒãˆã‚‹ç§‘ç›®ï¼‰
  ${w}
  â†’ æœ€ä½é™ã®å¾—ç‚¹ãƒ©ã‚¤ãƒ³ã‚’è¨­å®šã—ã€å­¦ç¿’æ™‚é–“ã‚’åŠ¹ç‡åŒ–

â–¶ æ–¹é‡
  å¾—æ„ç§‘ç›®ã§ãƒªãƒ¼ãƒ‰ã—ã€è‹¦æ‰‹ç§‘ç›®ã®å¤±ç‚¹ã‚’æœ€å°åŒ–ã€‚
  åˆè¨ˆç‚¹ã§åˆæ ¼ãƒ©ã‚¤ãƒ³ã‚’è¶…ãˆã‚‹ã“ã¨ã‚’ç›®æ¨™ã¨ã™ã‚‹ã€‚`;

    document.getElementById('checklist').value = txt;
    localStorage.setItem('checklist_output', txt);
    const badge = document.getElementById('badgeArea');
    badge.classList.add('show');
    showMamko('é…ç‚¹æˆ¦ç•¥ãŒã¾ã¨ã¾ã‚Šã¾ã—ãŸ âœ¦');
  }

  // ãƒ«ãƒ¼ãƒ«å…¥åŠ›
  const rulesArea = document.getElementById('rules');
  const ruleInputs = [];
  for (let i = 0; i < 10; i++) {
    const wrap = document.createElement('div');
    wrap.className = 'rule-item';
    const num = document.createElement('span');
    num.className = 'rule-num'; num.textContent = i + 1;
    const inp = document.createElement('input');
    inp.type = 'text';
    inp.placeholder = `ãƒ«ãƒ¼ãƒ« ${i + 1}`;
    inp.style.marginBottom = '0';
    inp.addEventListener('input', updateRules);
    wrap.appendChild(num); wrap.appendChild(inp);
    rulesArea.appendChild(wrap);
    ruleInputs.push(inp);
  }

  function updateRules() {
    const lines = ruleInputs
      .map((r, i) => r.value.trim() ? `${i+1}. ${r.value.trim()}` : null)
      .filter(Boolean).join('\n');
    const txt = lines
      ? `ã€æˆ‘ãŒå®¶ã®å—é¨“ãƒ«ãƒ¼ãƒ«ã€‘\n\n${lines}\n\nâ€” ${new Date().getFullYear()}å¹´ ä½œæˆ`
      : '';
    document.getElementById('rulesOutput').value = txt;
    localStorage.setItem('rules_output', txt);
    showMamko('ãƒ«ãƒ¼ãƒ«ã‚’è¨˜éŒ²ã—ã¾ã—ãŸ âœ¦');
  }

  /* â•â•â•â•â•â• ã‚³ãƒ”ãƒ¼ â•â•â•â•â•â• */
  function copyText(textareaId, btnId) {
    const ta  = document.getElementById(textareaId);
    const btn = document.getElementById(btnId);
    if (!ta.value.trim()) return;
    navigator.clipboard.writeText(ta.value).then(() => {
      btn.textContent = 'âœ“ ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ';
      btn.classList.add('copied');
      setTimeout(() => {
        btn.textContent = 'âœ¦ ã‚³ãƒ”ãƒ¼ã™ã‚‹';
        btn.classList.remove('copied');
      }, 2000);
    });
  }

  /* â•â•â•â•â•â• mamå­ãƒãƒ–ãƒ« â•â•â•â•â•â• */
  let mamkoTimer = null;
  function showMamko(msg, duration = 3500) {
    const bubble = document.getElementById('mamkoBubble');
    document.getElementById('mamkoText').innerHTML = msg;
    bubble.classList.add('show');
    clearTimeout(mamkoTimer);
    mamkoTimer = setTimeout(() => bubble.classList.remove('show'), duration);
  }

  /* â•â•â•â•â•â• localStorage å¾©å…ƒ â•â•â•â•â•â• */
  window.addEventListener('load', () => {
    const savedTone  = localStorage.getItem('tone_key');
    const savedOut   = localStorage.getItem('tone_output');
    const savedCheck = localStorage.getItem('checklist_output');
    const savedRules = localStorage.getItem('rules_output');
    if (savedOut)   document.getElementById('output').value   = savedOut;
    if (savedCheck) { document.getElementById('checklist').value = savedCheck; document.getElementById('badgeArea').classList.add('show'); }
    if (savedRules) document.getElementById('rulesOutput').value = savedRules;
    if (savedTone) {
      const map = { 'ä¸å¯§':'polite','äº¤æ¸‰':'nego','å¼·ç¡¬':'strong' };
      const k = map[savedTone];
      if (k) document.getElementById(`btn-${k}`).className = `tone-btn active-${k}`;
    }
  });
</script>
</body>
</html>
