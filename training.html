<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å·§ç·»æ€§Ã—è¨€èªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚«ãƒ¼ãƒ‰</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;800;900&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Nunito', sans-serif; min-height: 100vh; background: #f8fafc; }
    .card-item { transition: all 0.18s cubic-bezier(.4,2,.6,1); cursor: pointer; }
    .card-item:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 12px 32px rgba(0,0,0,0.12); }
    .btn { border: none; cursor: pointer; font-family: 'Nunito', sans-serif; transition: all 0.15s; }
    .btn:hover { filter: brightness(1.08); transform: scale(1.03); }
    .btn:active { transform: scale(0.97); }
    .bounce-in { animation: bounceIn 0.4s cubic-bezier(.4,2,.6,1); }
    @keyframes bounceIn { 0%{transform:scale(0.7);opacity:0} 100%{transform:scale(1);opacity:1} }
    .step-enter { animation: stepIn 0.3s cubic-bezier(.4,2,.6,1); }
    @keyframes stepIn { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }
  
    .home-btn {
      position: fixed; bottom: 20px; right: 20px; z-index: 9999;
      background: rgba(15,14,23,0.88); backdrop-filter: blur(8px);
      color: #fff; border: 1px solid rgba(255,255,255,0.15);
      border-radius: 99px; padding: 10px 20px;
      font-family: "Nunito", sans-serif; font-size: 13px; font-weight: 800;
      text-decoration: none; display: flex; align-items: center; gap: 6px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      transition: all 0.2s cubic-bezier(.4,2,.3,1);
    }
    .home-btn:hover { transform: scale(1.08); background: rgba(255,137,6,0.92); border-color: transparent; }

    .pw-overlay {
      position: fixed; inset: 0; z-index: 99999;
      background: #0f0e17;
      display: flex; align-items: center; justify-content: center;
      font-family: "Nunito", sans-serif;
    }
    .pw-box {
      background: #1a1828; border: 1px solid rgba(255,255,255,0.1);
      border-radius: 28px; padding: 40px 36px; width: 90%; max-width: 380px;
      text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    }
    .pw-icon { font-size: 52px; margin-bottom: 16px; }
    .pw-title { font-size: 20px; font-weight: 900; color: #fff; margin-bottom: 6px; }
    .pw-sub { font-size: 13px; color: #a7a9be; margin-bottom: 28px; line-height: 1.6; }
    .pw-input {
      width: 100%; padding: 14px 18px; border-radius: 14px;
      border: 2px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05);
      color: #fff; font-size: 18px; font-family: "Nunito", sans-serif;
      font-weight: 800; text-align: center; letter-spacing: 4px;
      outline: none; margin-bottom: 14px; transition: border-color 0.2s;
    }
    .pw-input:focus { border-color: #ff8906; }
    .pw-btn {
      width: 100%; padding: 14px; border-radius: 14px; border: none;
      background: linear-gradient(135deg, #ff8906, #f25f4c);
      color: #fff; font-size: 16px; font-weight: 900;
      font-family: "Nunito", sans-serif; cursor: pointer;
      transition: all 0.2s; box-shadow: 0 4px 20px rgba(255,137,6,0.3);
    }
    .pw-btn:hover { transform: scale(1.03); filter: brightness(1.08); }
    .pw-error { color: #f25f4c; font-size: 13px; font-weight: 800; margin-top: 10px; min-height: 20px; }
    .pw-note { font-size: 11px; color: rgba(167,169,190,0.5); margin-top: 20px; line-height: 1.7; }
</style>
</head>
<body>
  
<div class="pw-overlay" id="pwOverlay">
  <div class="pw-box">
    <div class="pw-icon">ğŸ”</div>
    <div class="pw-title">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›</div>
    <div class="pw-sub">ã“ã®ã‚¢ãƒ—ãƒªã¯noteè¨˜äº‹ã‚’ã”è³¼å…¥ã„ãŸã ã„ãŸæ–¹å°‚ç”¨ã§ã™ã€‚<br/>è¨˜äº‹ã«è¨˜è¼‰ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</div>
    <input class="pw-input" id="pwInput" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" maxlength="20"
      onkeydown="if(event.key==='Enter')checkPw()" />
    <button class="pw-btn" onclick="checkPw()">â–¶ ã‚¢ãƒ—ãƒªã‚’é–‹ã</button>
    <div class="pw-error" id="pwError"></div>
    <div class="pw-note">â€» ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯noteè³¼å…¥å¾Œã®è¨˜äº‹å†…ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™</div>
  </div>
</div>
<script>
  (function(){
    var PWS = ["train25", "juku25"];
    var KEY = "tdl_pw_ok";
    if(sessionStorage.getItem(KEY)==="1"){ document.getElementById("pwOverlay").style.display="none"; return; }
    document.getElementById("pwOverlay").style.display="flex";
  })();
  function checkPw(){
    var PWS = ["train25", "juku25"];
    var v = document.getElementById("pwInput").value.trim();
    if(PWS.indexOf(v) !== -1){
      sessionStorage.setItem("tdl_pw_ok","1");
      document.getElementById("pwOverlay").style.display="none";
    } else {
      document.getElementById("pwError").textContent="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™ã€‚è¨˜äº‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚";
      document.getElementById("pwInput").value="";
    }
  }
</script>
<div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const CARDS = [
      { id:"c1", type:"kichousei", icon:"ğŸ§µ", title:"ã²ã‚‚ã¨ãŠã—",
        instruction:"ã‚ãªã®ãªã‹ã«ã²ã‚‚ã‚’ã¨ãŠã—ã¦ã¿ã‚ˆã†ï¼",
        steps:["ã²ã‚‚ã®ã•ãã‚’ã¤ã¾ã‚€","ã‚ãªã®ã¾ã‚“ãªã‹ã«ã‚ãŒã‘ã¦","ã‚†ã£ãã‚Šã¨ãŠã™","ã‚€ã“ã†ã‹ã‚‰ã²ã£ã±ã‚‹"],
        tip:"ğŸ’¡ ã²ã‚‚ã®ã•ãã‚’ã™ã“ã—ã‹ãŸãã™ã‚‹ã¨ã‚„ã‚Šã‚„ã™ã„ã‚ˆ",
        color:"#f43f5e", light:"#ffeef1", time:180,
        question:"ã²ã‚‚ã‚’ã¨ãŠã—ãŸã‚‰ã€ãªã‚“ã¦ã„ã†ï¼Ÿ", answer:"ã€Œã¨ãŠã‚Šã¾ã—ãŸï¼ã€" },
      { id:"c2", type:"kichousei", icon:"âœ‚ï¸", title:"ã¯ã•ã¿ãã‚Š",
        instruction:"ã›ã‚“ã®ã†ãˆã‚’ã˜ã‚‡ã†ãšã«ãã£ã¦ã¿ã‚ˆã†ï¼",
        steps:["ã¯ã•ã¿ã‚’ãŸã ã—ãã‚‚ã¤","ã›ã‚“ã®ã¯ã˜ã‹ã‚‰ãã‚Šã¯ã˜ã‚ã‚‹","ã‚†ã£ãã‚Šã™ã™ã‚€","ã•ã„ã”ã¾ã§ãã‚‹"],
        tip:"ğŸ’¡ ã‹ã¿ã‚’ã‚‚ã¤ã¦ã‚’ã†ã”ã‹ã™ã®ãŒã‚³ãƒ„",
        color:"#f97316", light:"#fff3ec", time:120,
        question:"ã¯ã•ã¿ã‚’ã¤ã‹ã†ã¨ããã‚’ã¤ã‘ã‚‹ã“ã¨ã¯ï¼Ÿ", answer:"ã€Œã¾ãˆã«ã‚€ã‘ãªã„ãƒ»ã¯ã—ã‚‰ãªã„ã€" },
      { id:"c3", type:"kichousei", icon:"ğŸ“„", title:"ãŠã‚ŠãŒã¿",
        instruction:"ã‹ã©ã¨ã‹ã©ã‚’ã´ã£ãŸã‚Šã‚ã‚ã›ã¦ãŸãŸã‚‚ã†ï¼",
        steps:["ã‹ã¿ã‚’ã²ã‚‰ã„ã¦ãŠã","ã‹ã©ã¨ã‹ã©ã‚’ã‚ã‚ã›ã‚‹","ã¾ã‚“ãªã‹ã‹ã‚‰ã‚†ã³ã§ãªã§ã‚‹","ã‹ãã£ã¨ãŠã‚Šã‚ã‚’ã¤ã‘ã‚‹"],
        tip:"ğŸ’¡ ãŠã‚Šã‚ã¯ã¤ã‚ã§ã—ã£ã‹ã‚Šã¤ã‘ã‚ˆã†",
        color:"#eab308", light:"#fefce8", time:150,
        question:"ãŠã‚ŠãŒã¿ã‚’ã™ã‚‹ã¨ãã®ã‚„ãããã¯ï¼Ÿ", answer:"ã€Œã‹ã©ã‚’ãã‚ãˆã‚‹ãƒ»ã¦ã„ã­ã„ã«ãŠã‚‹ã€" },
      { id:"c4", type:"kichousei", icon:"ğŸ§©", title:"ãã†ã‘ã„",
        instruction:"ã­ã‚“ã©ã§ã¾ã‚‹ã„ã‹ãŸã¡ã‚’ã¤ãã‚ã†ï¼",
        steps:["ã­ã‚“ã©ã‚’ã‚„ã‚ã‚‰ã‹ãã“ã­ã‚‹","ã¦ã®ã²ã‚‰ã«ã®ã›ã‚‹","ãã‚‹ãã‚‹ã¾ã‚ã™","ã¾ã‚“ã¾ã‚‹ã«ãªã£ãŸã‚‰ã‹ã‚“ã›ã„"],
        tip:"ğŸ’¡ ã‚Šã‚‡ã†ã¦ã‚’ã¤ã‹ã†ã¨ã¾ã‚‹ããªã‚Šã‚„ã™ã„ã‚ˆ",
        color:"#10b981", light:"#ecfdf5", time:200,
        question:"ã¾ã‚‹ã‚’ã¤ãã‚‹ã¨ãã¦ã‚’ã©ã†ã™ã‚‹ï¼Ÿ", answer:"ã€Œã¦ã®ã²ã‚‰ã§ãã‚‹ãã‚‹ã¾ã‚ã™ã€" },
      { id:"l1", type:"gengo", icon:"ğŸ‘‚", title:"ã—ã˜ãã",
        instruction:"ã›ã‚“ã›ã„ã®ã„ã†ã“ã¨ã‚’ã‚ˆããã„ã¦ã‚„ã£ã¦ã¿ã‚ˆã†ï¼",
        steps:["ã—ãšã‹ã«ãã","ã‚ãŸã¾ã®ãªã‹ã§ãã‚Šã‹ãˆã™","ã˜ã‚…ã‚“ã°ã‚“ã‚’ãŠã¼ãˆã‚‹","ã‚„ã£ã¦ã¿ã‚‹"],
        tip:"ğŸ’¡ ãŠã¦ã»ã‚“ã‚’ã¿ãªãŒã‚‰ã‚„ã£ã¦ã¿ã‚ˆã†",
        color:"#6366f1", light:"#eef2ff", time:120,
        question:"ã€Œã¾ãšã€‡ã€‡ã—ã¦ã€ã¤ãã«â–³â–³ã—ã¦ãã ã•ã„ã€ã®ã˜ã‚…ã‚“ã°ã‚“ã¯ï¼Ÿ", answer:"ã•ã„ã—ã‚‡ã«ã„ã£ãŸã“ã¨ã‹ã‚‰ã‚„ã‚‹" },
      { id:"l2", type:"gengo", icon:"ğŸ—£ï¸", title:"ã¯ãªã—ã‹ãŸ",
        instruction:"ãŠãŠããªã“ãˆã§ã€ã¯ã£ãã‚Šã¯ãªã—ã¦ã¿ã‚ˆã†ï¼",
        steps:["ã›ã™ã˜ã‚’ã®ã°ã™","ã‚ã„ã¦ã®ã‚ã‚’ã¿ã‚‹","ã‚†ã£ãã‚Šã¯ãªã™","ã•ã„ã”ã¾ã§ã„ã†"],
        tip:"ğŸ’¡ ãŠãªã‹ã‹ã‚‰ã“ãˆã‚’ã ã™ã¨ã‚ˆããã“ãˆã‚‹ã‚ˆ",
        color:"#8b5cf6", light:"#f5f3ff", time:90,
        question:"ã˜ã¶ã‚“ã®ãªã¾ãˆã‚’ã¯ã£ãã‚Šã„ã†ã‚Œã‚“ã—ã‚…ã†ã‚’ã—ã‚ˆã†", answer:"ã€Œã‚ãŸã—ã® ãªã¾ãˆã¯ â—‹â—‹ã§ã™ã€" },
      { id:"l3", type:"gengo", icon:"ğŸ“–", title:"ãŠã¯ãªã—",
        instruction:"ãˆã‚’ã¿ã¦ã€ãŠã¯ãªã—ã‚’ã¤ãã‚ã†ï¼",
        steps:["ãˆã‚’ã‚ˆãã¿ã‚‹","ã ã‚ŒãŒã„ã‚‹ï¼Ÿ","ãªã«ã‚’ã—ã¦ã„ã‚‹ï¼Ÿ","ã²ã¨ã¤ã®ãŠã¯ãªã—ã«ã™ã‚‹"],
        tip:"ğŸ’¡ ã€Œã¯ã˜ã‚ãƒ»ãªã‹ãƒ»ãŠã‚ã‚Šã€ã§ã‹ã‚“ãŒãˆã‚ˆã†",
        color:"#0ea5e9", light:"#f0f9ff", time:180,
        question:"ã“ã®ãˆã®ã“ã¯ãªãœã‚ã‚‰ã£ã¦ã„ã‚‹ã®ï¼Ÿ", answer:"ãˆã‚’ã¿ã¦ã˜ã¶ã‚“ã§ã‹ã‚“ãŒãˆã¦ã¿ã‚ˆã†ï¼" },
      { id:"l4", type:"gengo", icon:"ğŸ­", title:"ã©ã†ã•ã¼ã†ã‘ã‚“",
        instruction:"ã„ã‚ã‚ŒãŸã¨ãŠã‚Šã«ã‹ã‚‰ã ã‚’ã†ã”ã‹ãã†ï¼",
        steps:["ã€ŒãŠãŠã‹ã¿ã®ã¾ã­ã‚’ã—ã¦ã€","ã›ãªã‹ã‚’ã¾ã‚‹ã‚ã¦ã‚ã‚‹ã","ã€Œã†ã•ãã®ã¾ã­ã‚’ã—ã¦ã€","ã´ã‚‡ã‚“ã´ã‚‡ã‚“ã¯ã­ã‚‹"],
        tip:"ğŸ’¡ ã©ã†ã¶ã¤ã®ã¨ãã¡ã‚‡ã†ã‚’ã‹ã‚“ãŒãˆã‚ˆã†",
        color:"#14b8a6", light:"#f0fdfa", time:120,
        question:"ã†ã•ãã¨ã‹ã‚ã¯ã©ã£ã¡ãŒã¯ã‚„ã„ï¼Ÿãªãœï¼Ÿ", answer:"ã€Œã†ã•ãã€‚ã‚ã—ãŒãªãŒã„ã‹ã‚‰ã€ãªã©" },
    ];

    const TYPE_META = {
      kichousei: { label:"âœ‹ å·§ç·»æ€§", color:"#f43f5e" },
      gengo:     { label:"ğŸ’¬ è¨€èª",  color:"#6366f1" },
    };

    function Timer({ seconds, running, onDone }) {
      const [left, setLeft] = useState(seconds);
      const ref = useRef();
      useEffect(() => { setLeft(seconds); }, [seconds]);
      useEffect(() => {
        if (!running) { clearInterval(ref.current); return; }
        ref.current = setInterval(() => {
          setLeft(prev => {
            if (prev <= 1) { clearInterval(ref.current); onDone(); return 0; }
            return prev - 1;
          });
        }, 1000);
        return () => clearInterval(ref.current);
      }, [running]);
      const pct = (left / seconds) * 100;
      const color = pct > 50 ? "#10b981" : pct > 25 ? "#f59e0b" : "#ef4444";
      return (
        <div style={{ textAlign:"center" }}>
          <div style={{ fontSize:36, fontWeight:900, color }}>
            {String(Math.floor(left/60)).padStart(2,"0")}:{String(left%60).padStart(2,"0")}
          </div>
          <div style={{ height:8, background:"#e5e7eb", borderRadius:99, overflow:"hidden", marginTop:6 }}>
            <div style={{ height:"100%", width:`${pct}%`, background:color, borderRadius:99, transition:"width 1s linear, background 0.3s" }} />
          </div>
        </div>
      );
    }

    function StarRating({ value, onChange }) {
      return (
        <div style={{ display:"flex", gap:6, justifyContent:"center" }}>
          {[1,2,3].map(n => (
            <span key={n} onClick={() => onChange(n)} style={{ fontSize:32, cursor:"pointer", filter: n<=value ? "none" : "grayscale(1) opacity(0.4)", transition:"all 0.15s" }}>â­</span>
          ))}
        </div>
      );
    }

    function TrainingCard() {
      const [filter, setFilter]         = useState("all");
      const [selected, setSelected]     = useState(null);
      const [phase, setPhase]           = useState("intro");
      const [stepIdx, setStepIdx]       = useState(0);
      const [timerRunning, setTimerRunning] = useState(false);
      const [showAnswer, setShowAnswer] = useState(false);
      const [stars, setStars]           = useState(0);
      const [records, setRecords]       = useState(() => {
        try { return JSON.parse(localStorage.getItem("tdl_tc_records") || "{}"); } catch { return {}; }
      });

      useEffect(() => {
        localStorage.setItem("tdl_tc_records", JSON.stringify(records));
      }, [records]);

      const filtered = filter === "all" ? CARDS : CARDS.filter(c => c.type === filter);

      function openCard(card) {
        setSelected(card); setPhase("intro"); setStepIdx(0);
        setTimerRunning(false); setShowAnswer(false); setStars(0);
      }

      function nextStep() {
        if (stepIdx < selected.steps.length - 1) { setStepIdx(i => i+1); }
        else { setTimerRunning(false); setPhase("quiz"); }
      }

      function saveRecord() {
        setRecords(prev => ({ ...prev, [selected.id]: { stars, date: new Date().toLocaleDateString("ja-JP") } }));
        setSelected(null);
      }

      const card = selected;

      return (
        <div>
          {/* Header */}
          <div style={{ background:"linear-gradient(135deg,#1e40af,#6d28d9)", padding:"20px 20px 28px", color:"#fff" }}>
            <div style={{ maxWidth:640, margin:"0 auto" }}>
              {selected && (
                <button className="btn" onClick={() => setSelected(null)}
                  style={{ background:"rgba(255,255,255,0.15)", color:"#fff", borderRadius:10, padding:"6px 14px", fontSize:13, fontWeight:800, marginBottom:12 }}>
                  â† ã‚‚ã©ã‚‹
                </button>
              )}
              <div style={{ fontSize:13, color:"#bfdbfe", fontWeight:700, letterSpacing:1 }}>å·§ç·»æ€§ Ã— è¨€èªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚«ãƒ¼ãƒ‰</div>
              <div style={{ fontSize:22, fontWeight:900, marginTop:2 }}>
                {selected ? `${card.icon} ${card.title}` : "âœ‹ğŸ’¬ ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚«ãƒ¼ãƒ‰"}
              </div>
            </div>
          </div>

          <div style={{ maxWidth:640, margin:"0 auto", padding:"20px 16px 80px" }}>

            {/* CARD LIST */}
            {!selected && (
              <>
                <div style={{ display:"flex", gap:8, marginBottom:20 }}>
                  {[["all","ã™ã¹ã¦"],["kichousei","âœ‹ å·§ç·»æ€§"],["gengo","ğŸ’¬ è¨€èª"]].map(([v,l]) => (
                    <button key={v} className="btn" onClick={() => setFilter(v)} style={{
                      padding:"8px 16px", borderRadius:99, fontSize:13, fontWeight:800,
                      background: filter===v ? "#1e40af" : "#e0e7ff",
                      color: filter===v ? "#fff" : "#3730a3",
                    }}>{l}</button>
                  ))}
                </div>

                <div style={{ background:"#eef2ff", borderRadius:14, padding:"12px 16px", marginBottom:20, display:"flex", gap:20 }}>
                  <div style={{ textAlign:"center" }}>
                    <div style={{ fontSize:22, fontWeight:900, color:"#4f46e5" }}>{Object.keys(records).length}</div>
                    <div style={{ fontSize:11, color:"#6366f1", fontWeight:700 }}>ã‚¯ãƒªã‚¢æ¸ˆã¿</div>
                  </div>
                  <div style={{ width:1, background:"#c7d2fe" }} />
                  <div style={{ textAlign:"center" }}>
                    <div style={{ fontSize:22, fontWeight:900, color:"#f59e0b" }}>
                      {Object.values(records).reduce((s,r) => s+(r.stars||0), 0)}
                    </div>
                    <div style={{ fontSize:11, color:"#d97706", fontWeight:700 }}>ã‚ã‚ã›ã¦â­</div>
                  </div>
                  <div style={{ width:1, background:"#c7d2fe" }} />
                  <div style={{ textAlign:"center", flex:1 }}>
                    <div style={{ fontSize:22, fontWeight:900, color:"#10b981" }}>{CARDS.length - Object.keys(records).length}</div>
                    <div style={{ fontSize:11, color:"#059669", fontWeight:700 }}>ã®ã“ã‚Šã‚«ãƒ¼ãƒ‰</div>
                  </div>
                </div>

                <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:12 }}>
                  {filtered.map(card => {
                    const rec = records[card.id];
                    return (
                      <div key={card.id} className="card-item" onClick={() => openCard(card)} style={{
                        background: rec ? card.light : "#fff",
                        border: `2px solid ${rec ? card.color : "#e5e7eb"}`,
                        borderRadius:20, padding:"18px 14px", textAlign:"center",
                        boxShadow:"0 2px 8px rgba(0,0,0,0.06)",
                      }}>
                        <div style={{ fontSize:42, marginBottom:8 }}>{card.icon}</div>
                        <div style={{ fontWeight:900, fontSize:15, color:"#1e293b" }}>{card.title}</div>
                        <div style={{ fontSize:11, color:TYPE_META[card.type].color, fontWeight:700, marginTop:4 }}>{TYPE_META[card.type].label}</div>
                        {rec
                          ? <div style={{ marginTop:8, fontSize:13 }}>{"â­".repeat(rec.stars)}</div>
                          : <div style={{ marginTop:8, fontSize:11, color:"#94a3b8" }}>ã‚¿ãƒƒãƒ—ã—ã¦ã¯ã˜ã‚ã‚‹</div>}
                      </div>
                    );
                  })}
                </div>
              </>
            )}

            {/* CARD DETAIL */}
            {selected && (
              <div>
                {phase === "intro" && (
                  <div className="bounce-in">
                    <div style={{ background:"#fff", borderRadius:24, padding:28, boxShadow:"0 4px 20px rgba(0,0,0,0.08)", marginBottom:16 }}>
                      <div style={{ fontSize:64, textAlign:"center", marginBottom:16 }}>{card.icon}</div>
                      <div style={{ background:card.light, borderRadius:16, padding:"16px 20px", marginBottom:16 }}>
                        <div style={{ fontWeight:900, fontSize:16, color:card.color, marginBottom:8 }}>ğŸ“‹ ãŠã ã„</div>
                        <div style={{ fontSize:18, fontWeight:800, color:"#1e293b", lineHeight:1.5 }}>{card.instruction}</div>
                      </div>
                      <div style={{ background:"#fffbeb", borderRadius:12, padding:"12px 16px", fontSize:14, color:"#78350f", fontWeight:700 }}>{card.tip}</div>
                    </div>
                    <div style={{ textAlign:"center", marginBottom:16, fontSize:13, color:"#64748b", fontWeight:700 }}>
                      â± ã˜ã‹ã‚“ï¼š{Math.floor(card.time/60)}ãµã‚“{card.time%60 ? `${card.time%60}ã³ã‚‡ã†` : ""}
                    </div>
                    <button className="btn" onClick={() => { setPhase("steps"); setStepIdx(0); setTimerRunning(true); }} style={{
                      width:"100%", padding:"18px", borderRadius:18, fontSize:18, fontWeight:900,
                      background:`linear-gradient(135deg,${card.color},${card.color}cc)`,
                      color:"#fff", boxShadow:`0 6px 24px ${card.color}55`,
                    }}>â–¶ ã‚Œã‚“ã—ã‚…ã†ã‚’ã¯ã˜ã‚ã‚‹ï¼</button>
                  </div>
                )}

                {phase === "steps" && (
                  <div>
                    <div style={{ background:"#fff", borderRadius:20, padding:20, marginBottom:16, boxShadow:"0 2px 12px rgba(0,0,0,0.07)" }}>
                      <Timer seconds={card.time} running={timerRunning} onDone={() => setTimerRunning(false)} />
                    </div>
                    <div className="step-enter" style={{ background:"#fff", borderRadius:24, padding:28, boxShadow:"0 4px 20px rgba(0,0,0,0.08)", marginBottom:16 }}>
                      <div style={{ display:"flex", gap:8, marginBottom:20, flexWrap:"wrap" }}>
                        {card.steps.map((_,i) => (
                          <div key={i} style={{ width:28, height:28, borderRadius:99, fontSize:13, fontWeight:900,
                            display:"flex", alignItems:"center", justifyContent:"center",
                            background: i<=stepIdx ? card.color : "#e5e7eb",
                            color: i<=stepIdx ? "#fff" : "#94a3b8", transition:"all 0.3s" }}>{i+1}</div>
                        ))}
                      </div>
                      <div style={{ fontSize:14, color:"#94a3b8", fontWeight:700, marginBottom:8 }}>ã¦ã˜ã‚…ã‚“ {stepIdx+1} / {card.steps.length}</div>
                      <div style={{ fontSize:22, fontWeight:900, color:"#1e293b", lineHeight:1.5, marginBottom:24 }}>{card.steps[stepIdx]}</div>
                      <button className="btn" onClick={nextStep} style={{
                        width:"100%", padding:"16px", borderRadius:16, fontSize:16, fontWeight:900,
                        background:card.color, color:"#fff", boxShadow:`0 4px 16px ${card.color}44`,
                      }}>{stepIdx < card.steps.length-1 ? "ã¤ãã¸ â–¶" : "ã§ããŸï¼ âœ…"}</button>
                    </div>
                    <div style={{ background:"#fffbeb", borderRadius:14, padding:"12px 16px", fontSize:13, color:"#92400e", fontWeight:700 }}>{card.tip}</div>
                  </div>
                )}

                {phase === "quiz" && (
                  <div className="bounce-in">
                    <div style={{ background:"#fff", borderRadius:24, padding:28, boxShadow:"0 4px 20px rgba(0,0,0,0.08)", marginBottom:16 }}>
                      <div style={{ textAlign:"center", fontSize:48, marginBottom:16 }}>ğŸ¤</div>
                      <div style={{ fontSize:14, color:"#64748b", fontWeight:700, marginBottom:12 }}>ã“ãŸãˆã¦ã¿ã‚ˆã†ï¼</div>
                      <div style={{ fontSize:18, fontWeight:900, color:"#1e293b", lineHeight:1.6, marginBottom:24 }}>{card.question}</div>
                      {!showAnswer ? (
                        <button className="btn" onClick={() => setShowAnswer(true)} style={{ width:"100%", padding:"14px", borderRadius:14, fontSize:15, fontWeight:900, background:"#eef2ff", color:"#4f46e5" }}>
                          ã“ãŸãˆã‚’ã¿ã‚‹ ğŸ‘€
                        </button>
                      ) : (
                        <div>
                          <div style={{ background:"#f0fdf4", border:"2px solid #86efac", borderRadius:16, padding:"16px 20px", marginBottom:20 }}>
                            <div style={{ fontSize:13, color:"#16a34a", fontWeight:700, marginBottom:6 }}>âœ… ã“ãŸãˆã®ã‚Œã„</div>
                            <div style={{ fontSize:17, fontWeight:900, color:"#14532d" }}>{card.answer}</div>
                          </div>
                          <button className="btn" onClick={() => setPhase("result")} style={{ width:"100%", padding:"16px", borderRadius:16, fontSize:16, fontWeight:900, background:"#4f46e5", color:"#fff", boxShadow:"0 4px 16px rgba(79,70,229,0.3)" }}>
                            ã¤ãã¸ â–¶
                          </button>
                        </div>
                      )}
                    </div>
                  </div>
                )}

                {phase === "result" && (
                  <div className="bounce-in">
                    <div style={{ background:"#fff", borderRadius:24, padding:32, boxShadow:"0 4px 20px rgba(0,0,0,0.08)", textAlign:"center", marginBottom:16 }}>
                      <div style={{ fontSize:64, marginBottom:12 }}>ğŸ‰</div>
                      <div style={{ fontSize:24, fontWeight:900, color:"#1e293b", marginBottom:6 }}>ã‚Œã‚“ã—ã‚…ã†ã‹ã‚“ã‚Šã‚‡ã†ï¼</div>
                      <div style={{ fontSize:14, color:"#64748b", marginBottom:28 }}>ã©ã†ã ã£ãŸï¼Ÿã»ã—ã‚’ã¤ã‘ã‚ˆã†ï¼</div>
                      <StarRating value={stars} onChange={setStars} />
                      <div style={{ fontSize:13, color:"#94a3b8", marginTop:12, marginBottom:28 }}>
                        {["","ã‚‚ã†ã„ã¡ã‹ã„ã‚„ã‚ã†ï¼","ã„ã„ã‹ã‚“ã˜ï¼","ã‹ã‚“ãºãï¼ï¼ğŸ†"][stars]||""}
                      </div>
                      <button className="btn" onClick={saveRecord} disabled={stars===0} style={{
                        width:"100%", padding:"16px", borderRadius:16, fontSize:16, fontWeight:900,
                        background: stars>0 ? card.color : "#e5e7eb",
                        color: stars>0 ? "#fff" : "#94a3b8",
                        cursor: stars>0 ? "pointer" : "not-allowed",
                        transition:"all 0.2s",
                      }}>ãã‚ãã™ã‚‹ âœ…</button>
                    </div>
                  </div>
                )}
              </div>
            )}
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<TrainingCard />);
  </script>
</body>
</html>
