<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ¦ç•¥ãƒã‚¹ã‚¿ãƒ¼ã‚¢ãƒ—ãƒª - survival_mam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <style>
        /* ã‚ãªãŸã®ã‚ªãƒªã‚¸ãƒŠãƒ«ã®style.cssã‚’å®Œå…¨ã«åæ˜  */
        body { margin: 0; background: #0f172a; color: #f8fafc; font-family: sans-serif; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; }
        .glass-panel { background: rgba(255, 255, 255, 0.08); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.15); border-radius: 40px; width: 100%; max-width: 480px; margin: 20px; padding: 25px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .thermometer-container { background: rgba(0, 0, 0, 0.5); border-radius: 50px; width: 50px; height: 220px; position: relative; overflow: hidden; border: 4px solid rgba(255, 255, 255, 0.3); }
        .thermometer-fill { position: absolute; bottom: 0; width: 100%; transition: height 0.8s ease; }
        .animate-float { animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        .monster-card { background: rgba(255,255,255,0.05); border-radius: 20px; padding: 12px; margin-bottom: 8px; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); }
        .map-node { background: #ff8a80; color: white; padding: 6px 12px; border-radius: 20px; margin: 4px; display: inline-block; font-size: 0.75rem; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script>
        const { useState, useEffect, useMemo } = React;
        const SECRET_PASSWORD = "master2025"; 

        // --- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒˆ ---
        const PasswordGate = ({ onAuthorized }) => {
            const [input, setInput] = useState("");
            const [error, setError] = useState(false);
            const check = () => {
                if (input === SECRET_PASSWORD) { onAuthorized(); } 
                else { setError(true); setInput(""); }
            };
            return React.createElement("div", { className: "glass-panel flex flex-col items-center justify-center min-h-[400px]" },
                React.createElement("h2", { className: "text-xl font-bold mb-4" }, "ğŸ” é™å®šå…¬é–‹ãƒ„ãƒ¼ãƒ«"),
                React.createElement("input", {
                    type: "password", value: input, 
                    onChange: (e) => setInput(e.target.value),
                    onKeyDown: (e) => e.key === 'Enter' && check(),
                    className: "w-full p-4 rounded-xl bg-white/10 border border-white/20 text-center mb-4 text-white text-lg",
                    placeholder: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›"
                }),
                error && React.createElement("p", { className: "text-red-400 text-xs mb-4" }, "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“"),
                React.createElement("button", { onClick: check, className: "w-full py-4 bg-pink-600 rounded-xl font-bold text-lg" }, "ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹")
            );
        };

        // --- ã‚ãªãŸã®ã‚ªãƒªã‚¸ãƒŠãƒ«ã®script.jså…¨å†…å®¹ ---
        const App = () => {
            const STORAGE_KEY = 'survival_mam_v_safe_logs';
            const USERS_KEY = 'survival_mam_v_safe_names';
            const VOICE_LIB = {
                'ASDå‚¾å‘': { s: 'äºˆå®šå¤‰æ›´ã«æ··ä¹±', v: 'ä»Šæ—¥ã¯ã€‡ã€‡ãŒå¤‰ã‚ã£ãŸã‘ã©ã€â–³â–³ã¯ã„ã¤ã‚‚ã©ãŠã‚Šã ã‚ˆã€‚å¤§ä¸ˆå¤«ã€‚', h: 'äºˆå®šå¤‰æ›´ã¸ã®å£°ã‹ã‘' },
                'ADHDå‚¾å‘': { s: 'æ°—æŒã¡ã®åˆ‡ã‚Šæ›¿ãˆ', v: 'ã‚ã¨3åˆ†ã ã‘ï¼ã‚¿ã‚¤ãƒãƒ¼ãŒé³´ã£ãŸã‚‰çµ‚ã‚ã‚Šã«ã—ã‚ˆã†ã­ã€‚', h: 'åˆ‡ã‚Šæ›¿ãˆã®å£°ã‹ã‘' },
                'æ„Ÿè¦šéæ•': { s: 'éŸ³ã‚„å…‰ã§è¾›ã„', v: 'ã“ã“ã¯å®‰å…¨ã ã‚ˆã€‚ã‚†ã£ãã‚Šæ¯ã‚’åã„ã¦ã€å¸ã£ã¦ã”ã‚‰ã‚“ã€‚', h: 'æ„Ÿè¦šéæ•ã¸ã®å£°ã‹ã‘' },
                'åˆ†é›¢ä¸å®‰': { s: 'é›¢ã‚Œã‚‹ã®ãŒä¸å®‰', v: 'ãŠæ¯ã•ã‚“ã¯å¿…ãšã€‡æ™‚ã«è¿ãˆã«æ¥ã‚‹ã‚ˆã€‚ãã‚…ãƒ¼ã—ã¦å……é›»ã—ã‚ˆã†ã€‚', h: 'åˆ†é›¢ä¸å®‰ã¸ã®å£°ã‹ã‘' },
                'ç„¡æ°—åŠ›': { s: 'å‹•ã‘ãªã„ãƒ»ã ã‚‹ã„', v: 'ã‚†ã£ãã‚Šæ¯ã‚’ã¯ã„ã¦ã¿ã¦ã€‚ãŠæ¯ã•ã‚“ã‚‚ä¸€ç·’ã«ã™ã‚‹ã‚ˆã€‚', h: 'ç„¡æ°—åŠ›ã¸ã®å£°ã‹ã‘' }
            };
            const MONSTERS = [
                { id: 'iraira', name: 'ã‚¤ãƒ©ã‚¤ãƒ©ã‚¶ã‚¦ãƒ«ã‚¹', emoji: 'ğŸ¦–', correctId: 1, voiceKey: 'ASDå‚¾å‘' },
                { id: 'shikushiku', name: 'ã‚·ã‚¯ã‚·ã‚¯ã‚´ãƒ¼ã‚¹ãƒˆ', emoji: 'ğŸ‘»', correctId: 2, voiceKey: 'ADHDå‚¾å‘' },
                { id: 'moyamoya', name: 'ãƒ¢ãƒ¤ãƒ¢ãƒ¤ã‚¹ãƒ¢ãƒƒã‚°', emoji: 'ğŸŒ«ï¸', correctId: 1, voiceKey: 'æ„Ÿè¦šéæ•' },
                { id: 'zukizuki', name: 'ã‚ºã‚­ã‚ºã‚­ãƒ‹ãƒ¼ãƒ‰ãƒ«', emoji: 'ğŸ“', correctId: 2, voiceKey: 'åˆ†é›¢ä¸å®‰' },
                { id: 'mushimushi', name: 'ãƒ ã‚·ãƒ ã‚·ãƒ»ãƒ ã‚·', emoji: 'ğŸ˜¶', correctId: 1, voiceKey: 'ç„¡æ°—åŠ›' }
            ];
            const COPING_CARDS = [
                { id: 1, name: 'ã„ãã‚’ ã¯ã', emoji: 'ğŸŒ¬ï¸' },
                { id: 2, name: 'ãã‚…ãƒ¼ã™ã‚‹', emoji: 'ğŸ«‚' },
                { id: 3, name: 'ã‹ãã ã™', emoji: 'âœï¸' },
                { id: 4, name: 'ãŠã‚„ã™ã¿', emoji: 'ğŸ›Œ' }
            ];

            const [scene, setScene] = useState('user-select');
            const [user, setUser] = useState('');
            const [userNames, setUserNames] = useState(['ãƒãƒ', 'ã“ã©ã‚‚ 1', 'ã“ã©ã‚‚ 2']);
            const [temp, setTemp] = useState(60);
            const [monster, setMonster] = useState(null);
            const [history, setHistory] = useState([]);
            const [isEditing, setIsEditing] = useState(false);
            const [showVoice, setShowVoice] = useState(false);
            const [startTime, setStartTime] = useState(null);
            const [questions, setQuestions] = useState({ q1: '', q2: '', q3: '', q4: '', q5: '' });

            useEffect(() => {
                const savedNames = localStorage.getItem(USERS_KEY);
                if (savedNames) setUserNames(JSON.parse(savedNames));
                const savedLogs = localStorage.getItem(STORAGE_KEY);
                if (savedLogs) setHistory(JSON.parse(savedLogs));
            }, []);

            const saveNames = (newNames) => {
                setUserNames(newNames);
                localStorage.setItem(USERS_KEY, JSON.stringify(newNames));
            };

            const handleReset = () => {
                if (window.confirm("è¨˜éŒ²ã¨ãŠåå‰ã‚’ã™ã¹ã¦æ¶ˆã—ã¦ã€æ–°ã—ãã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã™ã‹ï¼Ÿ")) {
                    localStorage.removeItem(STORAGE_KEY);
                    localStorage.removeItem(USERS_KEY);
                    setUserNames(['ãƒãƒ', 'ã“ã©ã‚‚ 1', 'ã“ã©ã‚‚ 2']);
                    setHistory([]);
                    setQuestions({ q1: '', q2: '', q3: '', q4: '', q5: '' });
                    setScene('user-select');
                }
            };

            const handleAction = (card) => {
                if (card.id === monster.correctId) {
                    const nextTemp = Math.max(0, temp - 25);
                    setTemp(nextTemp);
                    if (nextTemp <= 10) {
                        const duration = Math.floor((Date.now() - startTime) / 1000);
                        const newLog = { user, monster: monster.name, time: duration, timestamp: Date.now() };
                        const newHistory = [newLog, ...history];
                        setHistory(newHistory);
                        localStorage.setItem(STORAGE_KEY, JSON.stringify(newHistory));
                        setScene('result-win');
                    }
                } else {
                    setTemp(Math.min(100, temp + 15));
                }
            };

            const monthlyLogs = useMemo(() => {
                const now = new Date();
                return history.filter(l => {
                    const d = new Date(l.timestamp);
                    return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear() && l.user === user;
                });
            }, [history, user]);

            const generateReport = (target) => {
                if (monthlyLogs.length === 0) return "è¨˜éŒ²ã‚’æºœã‚ã¦ã‹ã‚‰é¸ã‚“ã§ãã ã•ã„ã€‚";
                const total = monthlyLogs.length;
                const avg = Math.round(monthlyLogs.reduce((s, l) => s + l.time, 0) / total);
                const base = `å¯¾å¿œæ•°ï¼š${total}ä»¶ã€‚å¹³å‡è½ã¡ç€ãæ™‚é–“ï¼š${avg}ç§’ã€‚`;
                const t = {
                    'pro': `ï¼ˆå°‚é–€å®¶ã¸ï¼‰${base}å®¢è¦³çš„ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãç›¸è«‡ã—ã¾ã™ã€‚`,
                    'school': `ï¼ˆå…ˆç”Ÿã¸ï¼‰${base}å®¶åº­ã§ã®æˆåŠŸäº‹ä¾‹ã‚’å…±æœ‰ã—ã¾ã™ã€‚`,
                    'partner': `ï¼ˆå®¶æ—ã¸ï¼‰${base}è² è·ã‚’å¯è¦–åŒ–ã—ã¾ã—ãŸã€‚`,
                    'work': `ï¼ˆè·å ´ã¸ï¼‰${base}ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ãŸæŸ”è»Ÿãªèª¿æ•´ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚` 
                };
                return t[target];
            };

            return React.createElement("div", { className: "glass-panel text-center" },
                scene === 'user-select' && React.createElement("div", null,
                    React.createElement("h2", { className: "text-3xl font-black mb-8" }, "ã ã‚ŒãŒ ã‚ãã¶ï¼Ÿ"),
                    React.createElement("div", { className: "flex flex-col gap-4" },
                        userNames.map((u, i) => React.createElement("div", { key: i, className: "flex gap-2" },
                            isEditing 
                                ? React.createElement("input", { className: "flex-1 p-4 rounded-xl bg-white/20 text-white", value: u, onChange: e => { const n = [...userNames]; n[i] = e.target.value; saveNames(n); } })
                                : React.createElement("button", { onClick: () => { setUser(u); setScene('start'); }, className: `flex-1 p-6 rounded-2xl text-2xl font-bold shadow-lg ${i === 0 ? 'bg-pink-500/70' : 'bg-blue-500/70'}` }, u)
                        ))
                    ),
                    React.createElement("div", { className: "mt-8 space-y-4" },
                        React.createElement("button", { onClick: () => setIsEditing(!isEditing), className: "opacity-60 text-xs underline block mx-auto" }, isEditing ? "âœ… æ±ºå®š" : "âš™ï¸ ãªã¾ãˆã‚’ ã‹ãˆã‚‹"),
                        React.createElement("button", { onClick: handleReset, className: "opacity-40 text-xs text-red-400 block mx-auto" }, "ğŸ—‘ï¸ ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ")
                    )
                ),
                scene === 'start' && React.createElement("div", { className: "text-left" },
                    React.createElement("button", { onClick: () => setScene('user-select'), className: "mb-4 opacity-50 text-sm" }, "â† ã‚‚ã©ã‚‹"),
                    React.createElement("h2", { className: "text-xl font-bold mb-6 text-blue-300" }, user, " ã® ã¼ã†ã‘ã‚“"),
                    MONSTERS.map(m => React.createElement("div", { key: m.id, className: "monster-card flex items-center justify-between", onClick: () => { setMonster(m); setTemp(60); setStartTime(Date.now()); setScene('playing'); } },
                        React.createElement("span", { className: "text-3xl animate-float" }, m.emoji),
                        React.createElement("span", { className: "font-bold flex-1 ml-4" }, m.name),
                        React.createElement("button", { className: "bg-white text-black text-xs px-3 py-1 rounded-md" }, "ã¯ã˜ã‚ã‚‹")
                    )),
                    user === userNames[0] && React.createElement("div", { className: "mt-6 space-y-2" },
                        React.createElement("button", { onClick: () => setScene('evidence-report'), className: "w-full py-4 bg-blue-500/20 rounded-xl font-bold text-blue-200" }, "æ­¦å™¨â‘¡ï¼šã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ç›¸è«‡è¡“"),
                        React.createElement("button", { onClick: () => setScene('career-map'), className: "w-full py-4 bg-yellow-500/20 rounded-xl font-bold text-yellow-200" }, "æ­¦å™¨â‘¢ï¼šã‚­ãƒ£ãƒªã‚¢å†è¨­è¨ˆãƒãƒƒãƒ—")
                    )
                ),
                scene === 'playing' && React.createElement("div", { className: "flex flex-col items-center" },
                    React.createElement("div", { className: "flex gap-8 items-center mb-6" },
                        React.createElement("div", { className: "thermometer-container" }, React.createElement("div", { className: "thermometer-fill", style: { height: `${temp}%`, background: temp > 80 ? '#ef4444' : '#60a5fa' } })),
                        React.createElement("div", { className: "text-4xl font-black" }, temp, "Â°C")
                    ),
                    React.createElement("button", { onClick: () => setShowVoice(!showVoice), className: "w-full py-2 bg-pink-500/30 rounded-lg text-[10px] mb-4" }, "ğŸ‘© ãƒãƒã¸ã®é­”æ³•ã®å£°æ›ã‘ã‚’è¡¨ç¤º"),
                    showVoice && React.createElement("div", { className: "p-4 bg-pink-900/40 rounded-xl mb-4 text-xs" }, VOICE_LIB[monster.voiceKey].v),
                    React.createElement("div", { className: "grid grid-cols-2 gap-4 w-full" },
                        COPING_CARDS.map(c => React.createElement("button", { key: c.id, onClick: () => handleAction(c), className: "bg-white/10 p-4 rounded-xl text-xs" }, c.emoji, " ", c.name))
                    )
                ),
                scene === 'result-win' && React.createElement("div", { className: "py-20 text-center" },
                    React.createElement("h2", { className: "text-4xl font-black text-yellow-300 mb-10" }, "ã‚¯ãƒªã‚¢ï¼"),
                    React.createElement("button", { onClick: () => setScene('start'), className: "p-4 bg-pink-500 rounded-full font-bold w-full" }, "ã‚‚ã†ã„ã¡ã©")
                ),
                scene === 'evidence-report' && React.createElement("div", { className: "text-left" },
                    React.createElement("button", { onClick: () => setScene('start'), className: "mb-4 opacity-50 text-sm" }, "â† ã‚‚ã©ã‚‹"),
                    React.createElement("textarea", { id: "rb", className: "w-full p-4 rounded-xl bg-black/40 text-xs mb-4", rows: "6", readOnly: true }),
                    React.createElement("div", { className: "grid grid-cols-2 gap-2" },
                        ['pro', 'school', 'partner', 'work'].map(t => React.createElement("button", { key: t, onClick: () => document.getElementById('rb').value = generateReport(t), className: "bg-white/10 p-2 rounded text-[10px]" }, t))
                    )
                ),
                scene === 'career-map' && React.createElement("div", { className: "text-left" },
                    React.createElement("button", { onClick: () => setScene('start'), className: "mb-4 opacity-50 text-sm" }, "â† ã‚‚ã©ã‚‹"),
                    React.createElement("div", { className: "space-y-2 mb-4" },
                        ['æ„Ÿè¬', 'æ¬²æ±‚', 'ã‚¹ã‚­ãƒ«', 'ãƒ“ã‚¸ãƒ§ãƒ³', 'ç¬¬ä¸€æ­©'].map((q, i) => React.createElement("input", { key: i, className: "w-full p-2 rounded bg-white/10 text-xs", placeholder: q, onChange: e => setQuestions({ ...questions, [`q${i + 1}`]: e.target.value }) }))
                    ),
                    React.createElement("div", { className: "flex flex-wrap gap-2" },
                        Object.values(questions).filter(v => v).map((v, i) => React.createElement("div", { key: i, className: "map-node" }, v))
                    )
                )
            );
        };

        const Main = () => {
            const [isAuthorized, setIsAuthorized] = useState(false);
            return isAuthorized ? React.createElement(App) : React.createElement(PasswordGate, { onAuthorized: () => setIsAuthorized(true) });
        };
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(Main));
    </script>
</body>
</html>